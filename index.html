<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<script src="jquery.min.js" type="text/javascript" charset="utf-8"></script>
	</head>
	
	<style type="text/css">
		#barrageInfo{
			margin:20px auto;
			position: relative;	
			padding-top: 10px;
			width: 1100px;
			height: 40px;
			border:1px solid #CCC;
		    font-size: 16px;
		    white-space:nowrap;
		    overflow: hidden;
		}
		#barrageInfo>div {
			position: absolute;
			right: -1000px;
		}
	</style>
	<body>
		这是iframe内部的页面4
		<div id="barrageInfo">
			<div>
				<span></span>
			</div>		
		</div>
		<script type="text/javascript">
		document.cookie = "aaaa = 333"

		//   window.parent.postMessage({need:"cookie"},"*")


		// let dom = parent.window.document.getElementById('aaa')
		// document.cookie = dom.getAttribute("data-cookie")
		// console.log(document.cookie)

		  window.onload = function(){
			console.log(document.cookie)
				// document.getElementById('child')
				// .contentWindow.postMessage({cookie:document.cookie}, "https://chestnuttree.github.io/helloWord/")
			}
		//    console.log($("#aaa").attr("data-cookie"))
	

		   window.addEventListener('message',function(event){
				console.log(event.data.cookie);
				
				document.cookie= event.data.cookie
				console.log(document.cookie)
		
			}, false);


			var speed = 0, infoWidth=0;
            //文字移动
			function barrageAnimate(){
				$("#barrageInfo>div").css("right",'-'+infoWidth+'px');  
				$("#barrageInfo>div").animate({
					right:'1100px',
				},speed,'linear')
			}
			//文字获取饼循环滚动
			function getBarrage(){
				$("#barrageInfo span").html("绝对是的空间")
				speed = 1000*document.body.clientWidth/80;	
				infoWidth = $("#barrageInfo span").width();
	            barrageAnimate();
				setInterval(barrageAnimate,speed+2000);
			}
			getBarrage()
		</script>
	</body>
</html>
